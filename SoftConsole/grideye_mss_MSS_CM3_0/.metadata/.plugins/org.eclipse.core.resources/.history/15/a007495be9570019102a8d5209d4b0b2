#include <stdio.h>
#include <inttypes.h>
#include "drivers/mss_i2c/mss_i2c.h"

// GridEYE address is 0x69
#define gridEYE_ADDR 0b1101001

void gridEYE_write(uint8_t addr, uint8_t data){

	uint8_t signal[] = {addr,data};

	MSS_I2C_write
		(
				&g_mss_i2c1,
				gridEYE_ADDR,
				signal,
				sizeof(signal),
				MSS_I2C_RELEASE_BUS

		);

	MSS_I2C_wait_complete(&g_mss_i2c1, MSS_I2C_NO_TIMEOUT);
}

int main()
{

	// Initialize with a clock freq of ~ 400kHz
	MSS_I2C_init(&g_mss_i2c1 , gridEYE_ADDR, MSS_I2C_PCLK_DIV_256 );

	// Reset Device
	gridEYE_write(0x1, 0x3f);

	// Set normal power mode
	gridEYE_write(0x0, 0x0);


	while (1) {
	}


	return 0;
}
